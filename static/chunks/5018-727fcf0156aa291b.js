"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5018],{7728:(e,s,a)=>{a.d(s,{A:()=>D});var r=a(95155),t=a(12115),d=a(94187),l=a(19938),i=a(14085),n=a(9955),c=a(15785),o=a(30979),m=a(51719),p=a(91902),h=a(98867),u=a(29602);let x=o.bL;o.YJ;let j=o.WT,y=t.forwardRef((e,s)=>{let{className:a,children:t,...d}=e;return(0,r.jsxs)(o.l9,{ref:s,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[t,(0,r.jsx)(o.In,{asChild:!0,children:(0,r.jsx)(m.A,{className:"h-4 w-4 opacity-50"})})]})});y.displayName=o.l9.displayName;let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(o.PP,{ref:s,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})});f.displayName=o.PP.displayName;let N=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(o.wn,{ref:s,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})});N.displayName=o.wn.displayName;let v=t.forwardRef((e,s)=>{let{className:a,children:t,position:d="popper",...l}=e;return(0,r.jsx)(o.ZL,{children:(0,r.jsxs)(o.UC,{ref:s,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:d,...l,children:[(0,r.jsx)(f,{}),(0,r.jsx)(o.LM,{className:(0,u.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(N,{})]})})});v.displayName=o.UC.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(o.JU,{ref:s,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=o.JU.displayName;let _=t.forwardRef((e,s)=>{let{className:a,children:t,...d}=e;return(0,r.jsxs)(o.q7,{ref:s,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})}),(0,r.jsx)(o.p4,{children:t})]})});_.displayName=o.q7.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(o.wv,{ref:s,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=o.wv.displayName;var g=a(20241),w=a(6053),b=a(49236),A=a(35007),P=a(2615),S=a(57223),q=a(66507),C=a(65753),k=a(87780),J=a(99053);let E=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],F=["BILLING","SHIPPING"],R=l.Ik().shape({street_address:l.Yj().min(5,"Address must be at least 5 characters").required("Address is required"),apartment:l.Yj().min(5,"Appartment must be at least 5 characters"),city:l.Yj().required("City is required"),state:l.Yj().required("State is required"),postal_code:l.Yj().matches(/^[1-9][0-9]{5}$/,"Please enter a valid 6-digit pin code").required("Pin code is required"),address_type:l.Yj().required("Address Type is required"),order_user_phone:l.Yj().matches(/^[6-9]\d{9}$/,"Please enter a valid Indian phone number").required("Phone number is required"),order_user_email:l.Yj().email("Please enter a valid email address").required("Email is required")}),D=e=>{var s,a,l,o;let{handleNext:m,shippingAddress:p,setShippingAddress:h,onClose:u,setAddresses:f,address:N}=e,{toast:D}=(0,g.dj)(),[I,L]=(0,t.useState)(!1),{status:U,data:Y}=(0,P.useSession)(),{create:M,update:T,error:V,loading:B}=(0,w.A)(b.MAIN_URL),G={street_address:"",apartment:"",city:"",state:"",postal_code:"",is_default:!1,order_user_phone:null!==(l=null==Y?void 0:null===(s=Y.user)||void 0===s?void 0:s.phone)&&void 0!==l?l:"",order_user_email:null!==(o=null==Y?void 0:null===(a=Y.user)||void 0===a?void 0:a.email)&&void 0!==o?o:"",address_type:"BILLING"},{data:z,read:$,error:H,loading:W}=(0,w.A)(b.MAIN_URL);(0,t.useEffect)(()=>{"authenticated"!==U||u||$(b.r9)},[U]);let K=async e=>{L(!0);try{let s=null;(s=(null==N?void 0:N.id)?await T("".concat(b.r9).concat(N.id,"/"),e):await M(b.r9,e))&&(null==s?void 0:s.id)&&(D({title:"Success!",description:"Delivery details have been saved successfully."}),u?((null==N?void 0:N.id)?f(e=>e.map(e=>e.id===s.id?s:e)):f(e=>[...e,s]),u()):(h&&h(s),m&&m(0)))}catch(e){D({variant:"destructive",title:"Error",description:"Something went wrong. Please try again."})}finally{L(!1)}},Z=e=>{h(e)};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("h2",{className:"text-xl sm:text-2xl font-semibold text-center mb-6 gradient-text flex items-center justify-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-5 w-5 sm:h-6 sm:w-6"}),"Delivery Details"]}),(0,r.jsx)(A.Zp,{className:"shadow-md border-t-4 border-t-primary",children:(0,r.jsxs)(A.Wu,{className:"p-6 md:p-8",children:[!u&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(c.J,{className:"text-base sm:text-lg font-medium flex items-center gap-2 mb-3",children:[(0,r.jsx)(q.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Saved Addresses"]}),(0,r.jsxs)(x,{defaultValue:(null==p?void 0:p.id)?p:"0",onValueChange:e=>Z(e),children:[(0,r.jsx)(y,{className:"w-full py-6 text-base",children:(0,r.jsx)(j,{placeholder:"Add new address"})}),(0,r.jsxs)(v,{children:[(0,r.jsx)(_,{value:"0",className:"py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-4 w-4"}),"Add new Address"]})}),Array.isArray(z)&&z.map(e=>(0,r.jsx)(_,{value:e,className:"py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4"}),null==e?void 0:e.street_address," - ",null==e?void 0:e.postal_code]})},e.id))]})]})]}),!(null==p?void 0:p.id)&&(0,r.jsx)(d.l1,{initialValues:null!=N?N:G,validationSchema:R,onSubmit:K,children:e=>{let{errors:s,touched:a,setFieldValue:t,values:l}=e;return(0,r.jsxs)(d.lV,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"address",children:"Address"}),(0,r.jsx)(d.D0,{as:n.p,id:"address",name:"street_address",placeholder:"Enter your address",className:s.street_address&&a.street_address?"border-destructive":""}),s.street_address&&a.street_address&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.street_address})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"Appartment",children:"Appartment"}),(0,r.jsx)(d.D0,{as:n.p,id:"Appartment",name:"apartment",placeholder:"Enter your Appartment",className:s.apartment&&a.apartment?"border-destructive":""}),s.apartment&&a.apartment&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.apartment})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"city",children:"City"}),(0,r.jsx)(d.D0,{as:n.p,id:"city",name:"city",placeholder:"Enter your city",className:s.city&&a.city?"border-destructive":""}),s.city&&a.city&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.city})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"state",children:"State"}),(0,r.jsxs)(x,{value:l.state,onValueChange:e=>t("state",e),children:[(0,r.jsx)(y,{className:s.state&&a.state?"border-destructive":"",children:(0,r.jsx)(j,{placeholder:"Select your state"})}),(0,r.jsx)(v,{children:E.map(e=>(0,r.jsx)(_,{value:e,children:e},e))})]}),s.state&&a.state&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.state})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"pinCode",children:"Pin Code"}),(0,r.jsx)(d.D0,{as:n.p,id:"pinCode",name:"postal_code",placeholder:"Enter 6-digit pin code",maxLength:6,className:s.postal_code&&a.postal_code?"border-destructive":""}),s.postal_code&&a.postal_code&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.postal_code})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"address_type",children:"Address Type"}),(0,r.jsxs)(x,{value:l.address_type,onValueChange:e=>t("address_type",e),children:[(0,r.jsx)(y,{className:s.address_type&&a.address_type?"border-destructive":"",children:(0,r.jsx)(j,{placeholder:"Select Address Type"})}),(0,r.jsx)(v,{children:F.map(e=>(0,r.jsx)(_,{value:e,children:e},e))})]}),s.address_type&&a.address_type&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.address_type})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"phone",children:"Phone Number"}),(0,r.jsx)(d.D0,{as:n.p,id:"phone",name:"order_user_phone",placeholder:"Enter your phone number",maxLength:10,className:s.order_user_phone&&a.order_user_phone?"border-destructive":""}),s.order_user_phone&&a.order_user_phone&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.order_user_phone})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(d.D0,{as:n.p,id:"email",name:"order_user_email",type:"email",placeholder:"Enter your email",className:s.order_user_email&&a.order_user_email?"border-destructive":""}),s.order_user_email&&a.order_user_email&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:s.order_user_email})]}),(0,r.jsx)(i.$,{type:"submit",className:"w-full py-6 mt-4 shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",disabled:I,children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-t-2 border-b-2 border-white rounded-full animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.A,{className:"h-5 w-5"}),"Save Delivery Details"]})})]})}}),!!(null==p?void 0:p.id)&&(0,r.jsxs)(i.$,{onClick:()=>m(0),className:"w-full md:w-1/2 mx-auto flex items-center justify-center gap-2 py-6 mt-4 shadow-md hover:shadow-lg transition-all duration-300",children:["Continue to Shipping",(0,r.jsx)(J.A,{className:"h-5 w-5"})]})]})})]})}},15785:(e,s,a)=>{a.d(s,{J:()=>c});var r=a(95155),t=a(12115),d=a(46195),l=a(40652),i=a(29602);let n=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(d.b,{ref:s,className:(0,i.cn)(n(),a),...t})});c.displayName=d.b.displayName},89134:(e,s,a)=>{a.d(s,{d:()=>r.dj,o:()=>r.oR});var r=a(20241)},72e3:(e,s,a)=>{a.d(s,{A:()=>h});var r=a(95155),t=a(79918),d=a(50823),l=a(82572),i=a(12115),n=a(76046),c=a(87364),o=a(48173),m=a.n(o);let p=e=>{let{children:s}=e,a=(0,n.useSearchParams)().get("callbackUrl");return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-theme-homepage w-full",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("div",{className:"w-full max-w-full mx-auto px-4 sm:px-6 lg:px-8 flex-grow",children:[!!a&&(0,r.jsx)("div",{className:"my-3 flex items-center",children:(0,r.jsxs)(m(),{href:"string"==typeof a?null==a?void 0:a.slice(1):"/",className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-sm",children:"Back"})]})}),s]}),(0,r.jsx)(d.A,{}),(0,r.jsx)(t.l,{})]})},h=e=>{let{children:s}=e;return(0,r.jsx)(i.Suspense,{children:(0,r.jsx)(p,{children:s})})}}}]);